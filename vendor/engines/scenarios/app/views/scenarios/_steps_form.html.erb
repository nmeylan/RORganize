<%#
# Author: Nicolas Meylan
# Date: 22 dÃ©c. 2012
# Encoding: UTF-8
# File: _steps.html.erb
%>


<div class="box">
  <input id='scenario_id' name='step[scenario_id]' type='hidden' value='<%= @scenario.id %>'>
  <div id="steps_form" class="form">
    <p>
      <%= label_tag :steps, t(:field_steps) %>
      <%= link_to t(:link_add_step), '#', {:class => 'add_step'} %>
    </p>
    <ul id="steps" style="margin-left:138px;">

    </ul>

  </div>

</div>

<script type="text/template" id="issue-template">
  <%= link_to "[%=issue.subject%]", "#", {:class => "[%=issue.id%]"}%>
</script>

  <script type="text/template" id="step-template">
    <div class='s'>
      <span>
        <span><a href='#' class='remove_step icon icon-del'></a></span>
        <input name='scenario[step][name]' size='80' type='text' class="steps_textfield" value="[%= step.name == null ? '' : step.name%]">
        <span class='issue_links'>
          [% if (step.id != null){%]
            <a href='#' class='open_add_overlay icon icon-add'><%= t(:link_add_issue)%></a> |
            <a href='#' class='open_create_overlay icon icon-add'><%= t(:link_create_issue)%></a></span>
          [%}%]
      </span>
      <div class="issues">
        <ul class='step_issues' id='[%= step.id%]'>

        </ul>
      </div>

      <%= render :partial => 'scenarios/issue_overlay', :locals => {:step_id => "[%=step.id%]"} %>
      <%= render :partial => 'scenarios/create_issue_overlay', :locals => {:step_id => "[%=step.id%]"} %>
    </div>
  </script>