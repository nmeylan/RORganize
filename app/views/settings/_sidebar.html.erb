<%#
# Author: Nicolas Meylan
# Date: 15 aoÃ»t 2012
# Encoding: UTF-8
# File: sidebar.html.erb
%>

<%=  content_for :sidebar do %>
  <ul class="tabs">
    <li class="settings_index"><%= link_to t(:link_update_informations),settings_path(@project.slug)%></li>
    <% if current_user.allowed_to?('index','Versions',@project) %>
      <li class="versions">
        <%= link_to t(:link_versions),
         versions_path(@project.slug)%>
      </li>
    <% end %>
    <% if current_user.allowed_to?('index','Categories',@project) %>
      <li class="categories">
        <%= link_to t(:link_categories),
          categories_path(@project.slug)%>
      </li>
    <% end %>
    <% if current_user.allowed_to?('index','Members',@project)%>
      <li class="members">
        <%= link_to t(:link_members),
          members_path(@project.slug)%>
      </li>
    <% end %>
    <% if current_user.allowed_to?('public_queries', 'Queries', @project) %>
      <li class="settings_public_queries">
        <%= link_to t(:link_queries),
          public_queries_settings_path(@project.slug) %>
      </li>
    <% end %>
    <% if current_user.allowed_to?('modules', 'Settings', @project) %>
      <li class="settings_modules">
        <%= link_to t(:link_modules),
          modules_settings_path(@project.slug) %>
      </li>
    <% end %>
    <li class="settings_repository"><%= link_to t(:link_repository),'#' %></li>

    <% if current_user.allowed_to?('archive', 'Projects', @project) %>
      <li class="project_delete warning">
          <%= link_to !@project.is_archived ? t(:text_close_this_project) : t(:text_open_this_project), archive_projects_path(@project.id),
            {:remote => true, :data => {:confirm => !@project.is_archived ? t(:text_archive_project) : t(:text_open_project)}, :method => :post} %>
      </li>
    <% end %>
    <% if current_user.allowed_to?('destroy', 'Projects', @project) %>
      <li class="project_delete alert">
        <%= link_to t(:text_delete_this_project),project_path(@project.id),
          {:remote => true, :data => {:confirm => t(:text_delete_project)}, :method => :delete} %>
      </li>
    <% end %>
  </ul>
<% end %>

<script type="text/javascript">
<% if controller.controller_name.eql?('settings') %>
    jQuery("#sidebar li[class='<%=controller.controller_name%>_<%=controller.action_name%>']").toggleClass("selected");
<% else %>
    jQuery("#sidebar li[class='<%=controller.controller_name%>']").toggleClass("selected");
<%  end %>
</script>