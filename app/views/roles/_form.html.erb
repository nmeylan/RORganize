<%#
# Author: Nicolas Meylan
# Date: 23 oct. 2012
# Encoding: UTF-8
# File: _form.html.erb
%>
<%= rorganize_form_for role, wrapper: :horizontal_form, wrapper_mappings: {boolean: :horizontal_boolean, check_boxes: :horizontal_radio_and_checkboxes},
                       html: {class: 'form-horizontal', multipart: true} do |f| %>

    <%= raw error_messages(role.errors.full_messages) %>
    <%= f.input :name, input_html: {maxlength: 255, disabled: role.is_locked} %>

    <div class="form-group collection-checkbox">
      <label class="control-label col-sm-3 col-lg-2"><%= t(:link_issues_statuses) %></label>
      <div class="control-form col-sm-9 col-lg-10">
        <%= f.collection_check_boxes :issues_status_ids, issues_statuses.sort { |x, y| x.enumeration.position <=> y.enumeration.position }.map { |is| [is.id, is.caption] }, :first, :last,
                                     checked: role.issues_statuses.map(&:id) %>
        <p class="help-block"><%= t("hint_role_statuses") %></p>
      </div>
    </div>

    <div class="form-group collection-checkbox">
      <label class="control-label col-sm-3 col-lg-2"><%= t(:link_roles) %></label>
      <div class="control-form col-sm-9 col-lg-10">
        <%= f.collection_check_boxes :assignable_role_ids, roles.map { |r| [r.id, r.caption] }, :first, :last, checked: role.assignable_roles.map(&:id) %>
        <p class="help-block"><%= t("hint_role_assignable_roles") %></p>
      </div>
    </div>

    <%= f.button :submit %>
<% end %>