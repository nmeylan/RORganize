function dtmlXMLLoaderObject(e,t,n,r){this.xmlDoc="";if(typeof n!="undefined")this.async=n;else this.async=true;this.onloadAction=e||null;this.mainObject=t||null;this.waitCall=null;this.rSeed=r||false;return this}function callerFunction(e,t){this.handler=function(n){if(!n)n=window.event;e(n,t);return true};return this.handler}function getAbsoluteLeft(e){return getOffset(e).left}function getAbsoluteTop(e){return getOffset(e).top}function getOffsetSum(e){var t=0,n=0;while(e){t=t+parseInt(e.offsetTop);n=n+parseInt(e.offsetLeft);e=e.offsetParent}return{top:t,left:n}}function getOffsetRect(e){var t=e.getBoundingClientRect();var n=document.body;var r=document.documentElement;var i=window.pageYOffset||r.scrollTop||n.scrollTop;var s=window.pageXOffset||r.scrollLeft||n.scrollLeft;var o=r.clientTop||n.clientTop||0;var u=r.clientLeft||n.clientLeft||0;var a=t.top+i-o;var f=t.left+s-u;return{top:Math.round(a),left:Math.round(f)}}function getOffset(e){if(e.getBoundingClientRect){return getOffsetRect(e)}else{return getOffsetSum(e)}}function convertStringToBoolean(e){if(typeof e=="string")e=e.toLowerCase();switch(e){case"1":case"true":case"yes":case"y":case 1:case true:return true;break;default:return false}}function getUrlSymbol(e){if(e.indexOf("?")!=-1)return"&";else return"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}function _dhtmlxError(e,t,n){if(!this.catches)this.catches=new Array;return this}function dhtmlXHeir(e,t){for(var n in t)if(typeof t[n]=="function")e[n]=t[n];return e}function dhtmlxEvent(e,t,n){if(e.addEventListener)e.addEventListener(t,n,false);else if(e.attachEvent)e.attachEvent("on"+t,n)}dhtmlx=function(e){for(var t in e)dhtmlx[t]=e[t];return dhtmlx};dhtmlx.extend_api=function(e,t,n){var r=window[e];if(!r)return;window[e]=function(e){if(e&&typeof e=="object"&&!e.tagName){var n=r.apply(this,t._init?t._init(e):arguments);for(var i in dhtmlx)if(t[i])this[t[i]](dhtmlx[i]);for(var i in e){if(t[i])this[t[i]](e[i]);else if(i.indexOf("on")==0){this.attachEvent(i,e[i])}}}else var n=r.apply(this,arguments);if(t._patch)t._patch(this);return n||this};window[e].prototype=r.prototype;if(n)dhtmlXHeir(window[e].prototype,n)};dhtmlxAjax={get:function(e,t){var n=new dtmlXMLLoaderObject(true);n.async=arguments.length<3;n.waitCall=t;n.loadXML(e);return n},post:function(e,t,n){var r=new dtmlXMLLoaderObject(true);r.async=arguments.length<4;r.waitCall=n;r.loadXML(e,true,t);return r},getSync:function(e){return this.get(e,null,true)},postSync:function(e,t){return this.post(e,t,null,true)}};dtmlXMLLoaderObject.prototype.waitLoadFunction=function(e){var t=true;this.check=function(){if(e&&e.onloadAction!=null){if(!e.xmlDoc.readyState||e.xmlDoc.readyState==4){if(!t)return;t=false;if(typeof e.onloadAction=="function")e.onloadAction(e.mainObject,null,null,null,e);if(e.waitCall){e.waitCall.call(this,e);e.waitCall=null}}}};return this.check};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(e,t){if(this.xmlDoc.responseXML){var n=this.xmlDoc.responseXML.getElementsByTagName(e);if(n.length==0&&e.indexOf(":")!=-1)var n=this.xmlDoc.responseXML.getElementsByTagName(e.split(":")[1]);var r=n[0]}else var r=this.xmlDoc.documentElement;if(r){this._retry=false;return r}if(_isIE&&!this._retry){var i=this.xmlDoc.responseText;var t=this.xmlDoc;this._retry=true;this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=false;this.xmlDoc["loadXM"+"L"](i);return this.getXMLTopNode(e,t)}dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(e){{try{var t=new DOMParser;this.xmlDoc=t.parseFromString(e,"text/xml")}catch(n){this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=this.async;this.xmlDoc["loadXM"+"L"](e)}}this.onloadAction(this.mainObject,null,null,null,this);if(this.waitCall){this.waitCall();this.waitCall=null}};dtmlXMLLoaderObject.prototype.loadXML=function(e,t,n,r){if(this.rSeed)e+=(e.indexOf("?")!=-1?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf();this.filePath=e;if(!_isIE&&window.XMLHttpRequest)this.xmlDoc=new XMLHttpRequest;else{if(document.implementation&&document.implementation.createDocument){this.xmlDoc=document.implementation.createDocument("","",null);this.xmlDoc.onload=new this.waitLoadFunction(this);this.xmlDoc.load(e);return}else this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP")}if(this.async)this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this);this.xmlDoc.open(t?"POST":"GET",e,this.async);if(r){this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")");this.xmlDoc.setRequestHeader("Content-type","text/xml")}else if(t)this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(null||n);if(!this.async)(new this.waitLoadFunction(this))()};dtmlXMLLoaderObject.prototype.destructor=function(){this._filterXPath=null;this._getAllNamedChilds=null;this._retry=null;this.async=null;this.rSeed=null;this.filePath=null;this.onloadAction=null;this.mainObject=null;this.xmlDoc=null;this.doXPath=null;this.doXPathOpera=null;this.doXSLTransToObject=null;this.doXSLTransToString=null;this.loadXML=null;this.loadXMLString=null;this.doSerialization=null;this.xmlNodeToJSON=null;this.getXMLTopNode=null;this.setXSLParamValue=null;return null};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(e){var t={};for(var n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;t["_tagvalue"]=e.firstChild?e.firstChild.nodeValue:"";for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n].tagName;if(r){if(!t[r])t[r]=[];t[r].push(this.xmlNodeToJSON(e.childNodes[n]))}}return t};dhtmlDragAndDropObject.prototype.removeDraggableItem=function(e){e.onmousedown=null;e.dragStarter=null;e.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(e,t){e.onmousedown=this.preCreateDragCopy;e.dragStarter=t;this.addDragLanding(e,t)};dhtmlDragAndDropObject.prototype.addDragLanding=function(e,t){e.dragLanding=t};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(e){if((e||window.event)&&(e||event).button==2)return;if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();if(e&&e.preventDefault){e.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(e){if(!e)e=window.event;dragger=window.dhtmlDragAndDrop;if((new Date).valueOf()-dragger.downtime<100)return;if(e.button==0&&_isIE)return dragger.stopDrag();if(!dragger.dragNode&&dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,e);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body){var t=dragger.gldragNode;if(dragger.gldragNode.old)t=dragger.gldragNode.old;t.parentNode.removeChild(t);var n=dragger.dragNode.pWindow;if(t.pWindow&&t.pWindow.dhtmlDragAndDrop.lastLanding)t.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(t.pWindow.dhtmlDragAndDrop.lastLanding);if(_isIE){var r=document.createElement("Div");r.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=r.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(true);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);n.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=e.clientX+15+(dragger.fx?dragger.fx*-1:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=e.clientY+3+(dragger.fy?dragger.fy*-1:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!e.srcElement)var i=e.target;else i=e.srcElement;dragger.checkLanding(i,e)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var t=parent.frames[window.name].frameElement.offsetParent;var n=0;var r=0;while(t){n+=t.offsetLeft;r+=t.offsetTop;t=t.offsetParent}if(parent.dhtmlDragAndDrop){var i=parent.dhtmlDragAndDrop.calculateFramePosition(1);n+=i.split("_")[0]*1;r+=i.split("_")[1]*1}if(e)return n+"_"+r;else this.fx=n;this.fy=r}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(e,t){if(e&&e.dragLanding){if(this.lastLanding)this.lastLanding.dragLanding._dragOut(this.lastLanding);this.lastLanding=e;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,t.clientX,t.clientY,t);this.lastLanding_scr=_isIE?t.srcElement:t.target}else{if(e&&e.tagName!="BODY")this.checkLanding(e.parentNode,t);else{if(this.lastLanding)this.lastLanding.dragLanding._dragOut(this.lastLanding,t.clientX,t.clientY,t);this.lastLanding=0;if(this._onNotFound)this._onNotFound()}}};dhtmlDragAndDropObject.prototype.stopDrag=function(e,t){dragger=window.dhtmlDragAndDrop;if(!t){dragger.stopFrameRoute();var n=dragger.lastLanding;dragger.lastLanding=null;if(n)n.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,n,_isIE?event.srcElement:e.target)}dragger.lastLanding=null;if(dragger.dragNode&&dragger.dragNode.parentNode==document.body)dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(e){if(e)window.dhtmlDragAndDrop.stopDrag(1,1);for(var t=0;t<window.frames.length;t++){try{if(window.frames[t]!=e&&window.frames[t].dhtmlDragAndDrop)window.frames[t].dhtmlDragAndDrop.stopFrameRoute(window)}catch(n){}}try{if(parent.dhtmlDragAndDrop&&parent!=window&&parent!=e)parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(n){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(e,t){if(e){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=e.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=e.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=e.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=e.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(!_isIE&&t&&(!_isFF||_FFrv<1.8))window.dhtmlDragAndDrop.calculateFramePosition()}try{if(parent.dhtmlDragAndDrop&&parent!=window&&parent!=e)parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(n){}for(var r=0;r<window.frames.length;r++){try{if(window.frames[r]!=e&&window.frames[r].dhtmlDragAndDrop)window.frames[r].dhtmlDragAndDrop.initFrameRoute(window,!e||t?1:0)}catch(n){}}};var _isFF=false;var _isIE=false;var _isOpera=false;var _isKHTML=false;var _isMacOS=false;var _isChrome=false;if(navigator.userAgent.indexOf("Macintosh")!=-1)_isMacOS=true;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1)_isChrome=true;if(navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("Konqueror")!=-1){var _KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;var _FFrv=1.9}else _isKHTML=true}else if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat")_isIE=8}else{_isFF=true;var _FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}dtmlXMLLoaderObject.prototype.doXPath=function(e,t,n,r){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(e,t);if(_isIE){if(!t)if(!this.xmlDoc.nodeName)t=this.xmlDoc.responseXML;else t=this.xmlDoc;if(!t)dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]);if(n!=null)t.setProperty("SelectionNamespaces","xmlns:xsl='"+n+"'");if(r=="single"){return t.selectSingleNode(e)}else{return t.selectNodes(e)||new Array(0)}}else{var i=t;if(!t){if(!this.xmlDoc.nodeName){t=this.xmlDoc.responseXML}else{t=this.xmlDoc}}if(!t)dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]);if(t.nodeName.indexOf("document")!=-1){i=t}else{i=t;t=t.ownerDocument}var s=XPathResult.ANY_TYPE;if(r=="single")s=XPathResult.FIRST_ORDERED_NODE_TYPE;var o=new Array;var u=t.evaluate(e,i,function(e){return n},s,null);if(s==XPathResult.FIRST_ORDERED_NODE_TYPE){return u.singleNodeValue}var a=u.iterateNext();while(a){o[o.length]=a;a=u.iterateNext()}return o}};_dhtmlxError.prototype.catchError=function(e,t){this.catches[e]=t};_dhtmlxError.prototype.throwError=function(e,t,n){if(this.catches[e])return this.catches[e](e,t,n);if(this.catches["ALL"])return this.catches["ALL"](e,t,n);alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]);return null};window.dhtmlxError=new _dhtmlxError;dtmlXMLLoaderObject.prototype.doXPathOpera=function(e,t){var n=e.replace(/[\/]+/gi,"/").split("/");var r=null;var i=1;if(!n.length)return[];if(n[0]==".")r=[t];else if(n[0]==""){r=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(n[i].replace(/\[[^\]]*\]/g,""));i++}else return[];for(i;i<n.length;i++)r=this._getAllNamedChilds(r,n[i]);if(n[i-1].indexOf("[")!=-1)r=this._filterXPath(r,n[i-1]);return r};dtmlXMLLoaderObject.prototype._filterXPath=function(e,t){var n=new Array;var t=t.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var r=0;r<e.length;r++)if(e[r].getAttribute(t))n[n.length]=e[r];return n};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(e,t){var n=new Array;if(_isKHTML)t=t.toUpperCase();for(var r=0;r<e.length;r++)for(var i=0;i<e[r].childNodes.length;i++){if(_isKHTML){if(e[r].childNodes[i].tagName&&e[r].childNodes[i].tagName.toUpperCase()==t)n[n.length]=e[r].childNodes[i]}else if(e[r].childNodes[i].tagName==t)n[n.length]=e[r].childNodes[i]}return n};dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(e,t,n){if(!n)n=this.xslDoc;if(n.responseXML)n=n.responseXML;var r=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+e+"']",n,"http://www.w3.org/1999/XSL/Transform","single");if(r!=null)r.firstChild.nodeValue=t};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(e,t){if(!e)e=this.xslDoc;if(e.responseXML)e=e.responseXML;if(!t)t=this.xmlDoc;if(t.responseXML)t=t.responseXML;if(!_isIE){if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor;this.XSLProcessor.importStylesheet(e)}var n=this.XSLProcessor.transformToDocument(t)}else{var n=new ActiveXObject("Msxml2.DOMDocument.3.0");try{t.transformNodeToObject(e,n)}catch(r){n=t.transformNode(e)}}return n};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(e,t){var n=this.doXSLTransToObject(e,t);if(typeof n=="string")return n;return this.doSerialization(n)};dtmlXMLLoaderObject.prototype.doSerialization=function(e){if(!e)e=this.xmlDoc;if(e.responseXML)e=e.responseXML;if(!_isIE){var t=new XMLSerializer;return t.serializeToString(e)}else return e.xml};dhtmlxEventable=function(obj){obj.attachEvent=function(e,t,n){e="ev_"+e.toLowerCase();if(!this[e])this[e]=new this.eventCatcher(n||this);return e+":"+this[e].addEvent(t)};obj.callEvent=function(e,t){e="ev_"+e.toLowerCase();if(this[e])return this[e].apply(this,t);return true};obj.checkEvent=function(e){return!!this["ev_"+e.toLowerCase()]};obj.eventCatcher=function(obj){var dhx_catch=[];var z=function(){var e=true;for(var t=0;t<dhx_catch.length;t++){if(dhx_catch[t]!=null){var n=dhx_catch[t].apply(obj,arguments);e=e&&n}}return e};z.addEvent=function(ev){if(typeof ev!="function")ev=eval(ev);if(ev)return dhx_catch.push(ev)-1;return false};z.removeEvent=function(e){dhx_catch[e]=null};return z};obj.detachEvent=function(e){if(e!=false){var t=e.split(":");this[t[0]].removeEvent(t[1])}};obj.detachAllEvents=function(){for(var e in this){if(e.indexOf("ev_")==0)delete this[e]}}}