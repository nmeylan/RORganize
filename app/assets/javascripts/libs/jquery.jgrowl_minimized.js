(function(e){e.jGrowl=function(t,n){if(e("#jGrowl").size()==0)e('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:e.jGrowl.defaults.position).appendTo("body");e("#jGrowl").jGrowl(t,n)};e.fn.jGrowl=function(t,n){if(e.isFunction(this.each)){var r=arguments;return this.each(function(){var i=this;if(e(this).data("jGrowl.instance")==undefined){e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null}));e(this).data("jGrowl.instance").startup(this)}if(e.isFunction(e(this).data("jGrowl.instance")[t])){e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(r).slice(1))}else{e(this).data("jGrowl.instance").create(t,n)}})}};e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:false,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:true,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(e,t,n){},beforeOpen:function(e,t,n){},afterOpen:function(e,t,n){},open:function(e,t,n){},beforeClose:function(e,t,n){},close:function(e,t,n){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,n){var n=e.extend({},this.defaults,n);if(typeof n.speed!=="undefined"){n.openDuration=n.speed;n.closeDuration=n.speed}this.notifications.push({message:t,options:n});n.log.apply(this.element,[this.element,t,n])},render:function(t){var n=this;var r=t.message;var i=t.options;var t=e('<div class="jGrowl-notification '+i.themeState+" ui-corner-all"+(i.group!=undefined&&i.group!=""?" "+i.group:"")+'">'+'<div class="jGrowl-close">'+i.closeTemplate+"</div>"+'<div class="jGrowl-header">'+i.header+"</div>"+'<div class="jGrowl-message">'+r+"</div></div>").data("jGrowl",i).addClass(i.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){e(this).parent().trigger("jGrowl.close")}).parent();e(t).bind("mouseover.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",true)}).bind("mouseout.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",false)}).bind("jGrowl.beforeOpen",function(){if(i.beforeOpen.apply(t,[t,r,i,n.element])!=false){e(this).trigger("jGrowl.open")}}).bind("jGrowl.open",function(){if(i.open.apply(t,[t,r,i,n.element])!=false){if(i.glue=="after"){e("div.jGrowl-notification:last",n.element).after(t)}else{e("div.jGrowl-notification:first",n.element).before(t)}e(this).animate(i.animateOpen,i.openDuration,i.easing,function(){if(e.browser.msie&&(parseInt(e(this).css("opacity"),10)===1||parseInt(e(this).css("opacity"),10)===0))this.style.removeAttribute("filter");if(e(this).data("jGrowl")!=null)e(this).data("jGrowl").created=new Date;e(this).trigger("jGrowl.afterOpen")})}}).bind("jGrowl.afterOpen",function(){i.afterOpen.apply(t,[t,r,i,n.element])}).bind("jGrowl.beforeClose",function(){if(i.beforeClose.apply(t,[t,r,i,n.element])!=false)e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",true);e(this).animate(i.animateClose,i.closeDuration,i.easing,function(){if(e.isFunction(i.close)){if(i.close.apply(t,[t,r,i,n.element])!==false)e(this).remove()}else{e(this).remove()}})}).trigger("jGrowl.beforeOpen");if(i.corners!=""&&e.fn.corner!=undefined)e(t).corner(i.corners);if(e("div.jGrowl-notification:parent",n.element).size()>1&&e("div.jGrowl-closer",n.element).size()==0&&this.defaults.closer!=false){e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose");if(e.isFunction(n.defaults.closer)){n.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])}})}},update:function(){e(this.element).find("div.jGrowl-notification:parent").each(function(){if(e(this).data("jGrowl")!=undefined&&e(this).data("jGrowl").created!=undefined&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life)<(new Date).getTime()&&e(this).data("jGrowl").sticky!=true&&(e(this).data("jGrowl.pause")==undefined||e(this).data("jGrowl.pause")!=true)){e(this).trigger("jGrowl.beforeClose")}});if(this.notifications.length>0&&(this.defaults.pool==0||e(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool))this.render(this.notifications.shift());if(e(this.element).find("div.jGrowl-notification:parent").size()<2){e(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})}},startup:function(t){this.element=e(t).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){e(t).data("jGrowl.instance").update()},parseInt(this.defaults.check));if(e.browser.msie&&parseInt(e.browser.version)<7&&!window["XMLHttpRequest"]){e(this.element).addClass("ie6")}},shutdown:function(){e(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){e(this.element).find("div.jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}});e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults})(jQuery)